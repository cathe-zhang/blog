(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{172:function(s,t,n){s.exports=n.p+"assets/img/github_action.71b0e150.png"},173:function(s,t,n){s.exports=n.p+"assets/img/image-20211105011425383.83ec1f5c.png"},174:function(s,t,n){s.exports=n.p+"assets/img/image-20211105011341129.2857c636.png"},175:function(s,t,n){s.exports=n.p+"assets/img/image-20211105011932378.102cf227.png"},176:function(s,t,n){s.exports=n.p+"assets/img/image-20211105012106123.151ff251.png"},177:function(s,t,n){s.exports=n.p+"assets/img/github_actions_node_cli.6fc2aa51.png"},178:function(s,t,n){s.exports=n.p+"assets/img/image-20211105012807786.4592e0d7.png"},179:function(s,t,n){s.exports=n.p+"assets/img/image-20211105013005108.a4f8046d.png"},252:function(s,t,n){"use strict";n.r(t);var a=[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"使用github-actions自动化构建项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用github-actions自动化构建项目"}},[this._v("#")]),this._v(" 使用Github Actions自动化构建项目")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(172),alt:"github action"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_1-获取-personal-access-token-并设置到仓库中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取-personal-access-token-并设置到仓库中"}},[this._v("#")]),this._v(" 1. 获取 Personal Access Token 并设置到仓库中")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"_1-1-获取-personal-access-token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-获取-personal-access-token"}},[this._v("#")]),this._v(" 1.1 获取 Personal Access Token")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(173),alt:"image-20211105011425383"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(174),alt:"image-20211105011341129"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"_1-2-给仓库添加-secret"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-给仓库添加-secret"}},[this._v("#")]),this._v(" 1.2 给仓库添加 Secret")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(175),alt:"image-20211105011932378"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(176),alt:"image-20211105012106123"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_2-添加-ci-脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加-ci-脚本"}},[this._v("#")]),this._v(" 2. 添加 CI 脚本")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" .github\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" .github\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" workflows\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" workflows\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" nodejs.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在 "),t("code",[this._v("nodejs.yml")]),this._v(" 中添加如下内容")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("name: 构建博客\non:\n  push:  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定触发事件")]),s._v("\n    branches:\n      - dev  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定触发 action 的分支")]),s._v("\n\njobs:\n  main:\n    runs-on: ubuntu-latest\n    steps:\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取github仓库代码")]),s._v("\n    - name: Checkout\n      uses: actions/checkout@v2\n      with:\n        persist-credentials: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行依赖安装")]),s._v("\n    - name: 安装依赖\n      run: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行构建步骤")]),s._v("\n\t\t- name: 构建\n      run: "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n\t\t\t  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行部署")]),s._v("\n    - name: 部署\n      uses: JamesIves/github-pages-deploy-action@releases/v3 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个action会根据配置自动推送代码到指定分支")]),s._v("\n      with:\n        ACCESS_TOKEN: "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${{ secrets.ACCESS_TOKEN }")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定密钥，即在第一步中设置的")]),s._v("\n        BRANCH: gh-pages  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定推送到的远程分支")]),s._v("\n        FOLDER: docs "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定构建之后要推送哪个目录的代码 如这里vuepress构建之后到产物在 docs 文件夹中")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_3-触发构建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-触发构建"}},[this._v("#")]),this._v(" 3. 触发构建")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin dev\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(177),alt:"Github Actions构建示例"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(178),alt:"image-20211105012807786"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:n(179),alt:"image-20211105013005108"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"_4-扩展应用-自动发布-npm-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-扩展应用-自动发布-npm-包"}},[this._v("#")]),this._v(" 4. 扩展应用 - 自动发布 NPM 包")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"_4-1-获取-npm-access-token-并设置到仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-获取-npm-access-token-并设置到仓库"}},[this._v("#")]),this._v(" 4.1 获取 npm access token 并设置到仓库")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"images/image-20211107023707441.png",alt:"image-20211107023707441"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"images/image-20211107023803287.png",alt:"image-20211107023803287"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"images/image-20211107023857562.png",alt:"image-20211107023857562"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"images/image-20211107024036315.png",alt:"image-20211107024036315"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("然后进入 Github 中的仓库设置，和第一步中设置 Access Token 的步骤一样，添加一个 key 为 "),t("code",[this._v("NPM_TOKEN")]),this._v(" ，值为刚刚获取到的 npm access token 的 secret。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h4",{attrs:{id:"_4-2-添加-npm-自动发包脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-添加-npm-自动发包脚本"}},[this._v("#")]),this._v(" 4.2 添加 npm 自动发包脚本")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("上面有说到，部署应用和发布 npm 包的区别只在于最后的一部分，我们将脚本稍作修改，将 "),t("code",[this._v("执行部署")]),this._v(" 步骤改成 "),t("code",[this._v("npm 发布")]),this._v(" 即可。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-yml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 构建博客\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定触发事件")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" dev  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定触发 action 的分支")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取github仓库代码")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Checkout\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v2\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("persist-credentials")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行依赖安装")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 安装依赖\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n        npm install")]),s._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行构建步骤")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 构建\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n\t\t\t  npm run build")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行部署")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 发布到 NPM\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/setup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node@v1\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry-url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//registry.npmjs.org/  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置发包npm地址仓库")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm publish "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行发布")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("NODE_AUTH_TOKEN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("secrets.NPM_TOKEN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刚刚设置的 NPM_TOKEN")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[this._v("#")]),this._v(" 参考资料")])}],e=n(0),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[s._m(0),s._v(" "),n("p",[s._v("当你想要在线上查看你的项目效果时，github actions 可以帮到你。")]),s._v(" "),n("p",[s._v("是的，就是它 ⬇️")]),s._v(" "),s._m(1),s._v(" "),n("p",[s._v("废话不多说，我们现在就用它来创建一个属于自己的博客，并实现推送代码之后网站内容自动更新。")]),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),s._m(5),s._v(" "),n("p",[s._v("点击 Generate new token 生成一个新的 token 并复制（注意：这个 token 只会在生成成功的时候展示，一旦退出就无法再查看，所以要记得保存）。")]),s._v(" "),s._m(6),s._v(" "),n("p",[s._v("进入你想添加 github action 的仓库，按照如下步骤操作：")]),s._v(" "),s._m(7),s._v(" "),n("p",[s._v("进入新建 secret 页面后，填写 Name 和 Value 字段，Name 为 ACCESS_TOKEN，Value 为刚刚保存的 Personal Access Token 值。")]),s._v(" "),s._m(8),s._v(" "),s._m(9),s._v(" "),n("p",[s._v("在项目根目录下按照如下的路径创建待执行的YAML文件")]),s._v(" "),s._m(10),s._m(11),s._v(" "),s._m(12),s._m(13),s._v(" "),n("p",[s._v("提交代码到 dev 分支：")]),s._v(" "),s._m(14),n("p",[s._v("此时点开对应 github 仓库的 Actions 选项卡就可以看到类似如下的构建过程：")]),s._v(" "),s._m(15),s._v(" "),n("p",[s._v("可以看到我们在 nodejs.yml 中的定义的 push 事件被触发，执行了 jobs 中的所有步骤，打包并将打包后到 docs 文件夹中的内容推送到了 github 仓库的 gh-pages 分支。")]),s._v(" "),n("p",[s._v("当complete job选项完成的时候，进入仓库的 Settings => Pages 菜单下，将 source Branch 字段设置为 gh-pages，文件夹选择 root 根目录就好：")]),s._v(" "),s._m(16),s._v(" "),n("p",[s._v("点击 Save 按钮稍等片刻，等到上面出现如下的通知表示已经构建成功：")]),s._v(" "),s._m(17),s._v(" "),n("p",[s._v("点击链接进入即可看到自动构建完成的应用了。从此以后，你只需要推送到 yml 文件中指定的分支，就可以自动触发构建，自动更新你的网站了。")]),s._v(" "),s._m(18),s._v(" "),n("p",[s._v("npm 发布其实跟上面的路程并无两样，只是第一步中要获取和设置的 github ACCESS_TOKEN 变成了 npm 的 ACCESS_TOKEN，第二步中的部署 github pages 脚本变成了 npm 发布脚本。")]),s._v(" "),s._m(19),s._v(" "),n("p",[s._v("进入 "),n("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm 官网"),n("OutboundLink")],1),s._v(" 并登录账号，然后点击右上角头像，点击 Access Tokens 进入 token 管理：")]),s._v(" "),s._m(20),s._v(" "),n("p",[s._v("点击 Generate New Token：")]),s._v(" "),s._m(21),s._v(" "),n("p",[s._v("出现如下的界面：")]),s._v(" "),s._m(22),s._v(" "),n("p",[s._v("因为我们是需要用到 token 去发布 npm 包，所以这里要选择 Publish 类型，然后点击 Generate Token 按钮，Token 就生成了：")]),s._v(" "),s._m(23),s._v(" "),n("p",[s._v("点击 Token 即可复制到剪贴板（注意这里的 Token 同样只会出现一次，记得保存到安全的地方）。")]),s._v(" "),s._m(24),s._v(" "),s._m(25),s._v(" "),s._m(26),s._v(" "),s._m(27),s._m(28),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://help.github.com/cn/articles/configuring-a-workflow",target:"_blank",rel:"noopener noreferrer"}},[s._v("github action"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://help.github.com/cn/articles/workflow-syntax-for-github-actions",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub 操作的工作流程语法"),n("OutboundLink")],1)])])])}),a,!1,null,null,null);t.default=r.exports}}]);