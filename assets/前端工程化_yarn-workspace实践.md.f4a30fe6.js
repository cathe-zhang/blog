import{_ as s,c as a,o as n,a as p}from"./app.7932eb4a.js";const u=JSON.parse('{"title":"yarn workspace \u5B9E\u8DF5","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u7ED3\u6784","slug":"\u7ED3\u6784","link":"#\u7ED3\u6784","children":[]},{"level":2,"title":"\u53C2\u8003","slug":"\u53C2\u8003","link":"#\u53C2\u8003","children":[]}],"relativePath":"\u524D\u7AEF\u5DE5\u7A0B\u5316/yarn-workspace\u5B9E\u8DF5.md"}'),o={name:"\u524D\u7AEF\u5DE5\u7A0B\u5316/yarn-workspace\u5B9E\u8DF5.md"},l=p(`<h1 id="yarn-workspace-\u5B9E\u8DF5" tabindex="-1">yarn workspace \u5B9E\u8DF5 <a class="header-anchor" href="#yarn-workspace-\u5B9E\u8DF5" aria-hidden="true">#</a></h1><h2 id="\u7ED3\u6784" tabindex="-1">\u7ED3\u6784 <a class="header-anchor" href="#\u7ED3\u6784" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">node_modules</span></span>
<span class="line"><span style="color:#A6ACCD;">packages</span></span>
<span class="line"><span style="color:#A6ACCD;">  youtils-functions</span></span>
<span class="line"><span style="color:#A6ACCD;">  	dist</span></span>
<span class="line"><span style="color:#A6ACCD;">    package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">    rollup.config.json</span></span>
<span class="line"><span style="color:#A6ACCD;">    src/main.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">  youtils-node</span></span>
<span class="line"><span style="color:#A6ACCD;">  	dist</span></span>
<span class="line"><span style="color:#A6ACCD;">  	package.json</span></span>
<span class="line"><span style="color:#A6ACCD;">  	rollup.config.json</span></span>
<span class="line"><span style="color:#A6ACCD;">  	src/main.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">package.json</span></span>
<span class="line"></span></code></pre></div><p>\u4E00\u4E2A yarn workspace \u5B9E\u73B0\u7684 monorepo \u9879\u76EE\u57FA\u672C\u7ED3\u6784\u5982\u4E0A\u3002</p><p>\u6839\u76EE\u5F55\u79F0\u4E3A workspace-root\uFF0C\u5728\u5B83\u4E0B\u9762\u6709 package.json \u9700\u8981\u505A\u5982\u4E0B\u58F0\u660E\uFF1A</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">private</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">workspaces</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">packages/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>&quot;private&quot;: false</code> \u8868\u793A\u8FD9\u662F\u4E00\u4E2A\u79C1\u6709\u9879\u76EE\uFF0C\u9632\u6B62\u88AB\u4E0D\u5C0F\u5FC3\u53D1\u5E03\u5230 npm\uFF0C\u56E0\u4E3A\u8FD9\u662F\u6574\u4E2A\u4ED3\u5E93\u7684\u6839\u76EE\u5F55\uFF0C\u4E00\u822C\u662F\u4E0D\u9700\u8981\u53D1\u5E03\u5230 npm \u7684\u3002</p><p><code>&quot;workspaces: [&quot;packages/*&quot;]&quot;</code> \u8868\u793A packages \u4E0B\u9762\u7684\u6587\u4EF6\u5939\u90FD\u4F1A\u4F5C\u4E3A workspace\uFF0C\u5728\u6839\u76EE\u5F55\u6216\u5B50\u76EE\u5F55\u4E0B\u6267\u884C <code>yarn install</code> \u65F6\uFF0C\u4F1A\u5C06\u6839\u76EE\u5F55\u4EE5\u53CA\u6240\u6709\u5B50\u76EE\u5F55 package.json \u4E2D\u58F0\u660E\u7684\u4F9D\u8D56\u5168\u90E8\u5B89\u88C5\u5230\u6839\u76EE\u5F55\u7684 node_modules \u4E2D\uFF0C\u5176\u4E2D\uFF0Cworkspaces \u4E5F\u5C31\u662F youtils-functions \u548C youtils-node \u7684\u8F6F\u94FE\u4F1A\u88AB\u6DFB\u52A0\u5230 node_modules \u4E2D\uFF0C\u5F53\u8FD9\u4E9B\u5305\u4E2D\u6709\u4E92\u76F8\u4F9D\u8D56\u800C\u4F9D\u8D56\u7684\u7248\u672C\u53F7\u53C8\u548C\u5F53\u524D\u7248\u672C\u4EE3\u7801\u7684 package.json \u4E2D\u58F0\u660E\u7684\u7248\u672C\u53F7\u5339\u914D\u65F6\uFF0C\u5C31\u4F1A\u81EA\u52A8\u5F15\u7528\u5230\u672C\u5730\u5BF9\u5E94\u7684\u9879\u76EE\u3002</p><p>\u4E0D\u540C\u9879\u76EE\u95F4\u7684\u516C\u5171\u4F9D\u8D56\u53EF\u4EE5\u58F0\u660E\u5728\u6839\u76EE\u5F55\u4E0B\uFF0C\u5B83\u4EEC\u90FD\u4F1A\u88AB\u5B89\u88C5\u5728\u6839\u76EE\u5F55\u7684 node_modules \u4E0B\uFF0C\u6240\u4EE5\u6784\u5EFA\u65F6\u4E5F\u53EF\u4EE5\u8BFB\u53D6\u5230\u3002</p><p>\u6BCF\u4E00\u4E2A\u5305\u7684\u6784\u5EFA\u6D41\u7A0B\u751A\u81F3\u6784\u5EFA\u5DE5\u5177\u90FD\u53EF\u80FD\u4E0D\u540C\uFF0C\u5B83\u4EEC\u53EF\u4EE5\u5728\u81EA\u5DF1\u7684 workspace \u4E2D\u58F0\u660E\u81EA\u5DF1\u7684\u6784\u5EFA\u914D\u7F6E\u5982 rollup.config.js\uFF0C\u4EE5\u53CA\u5728 package.json \u4E0B\u58F0\u660E\u5408\u9002\u7684 scripts\u3002</p><p>\u8FD0\u884C yarn workspaces run build\uFF0C\u53EF\u4EE5\u89E6\u53D1\u6BCF\u4E2A\u5B50\u5305 package.json \u4E2D\u7684 build \u547D\u4EE4\uFF0C\u540C\u6837\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u7EDF\u4E00\u5176\u4ED6\u7684\u811A\u672C\uFF0C\u5982test \u6765\u7EDF\u4E00\u6267\u884C\u5404\u4E2A\u5B50\u5305\u4E0B\u7684\u7C7B\u4F3C\u547D\u4EE4\u3002</p><p>\u8FD0\u884C <code>yarn workspaces info</code>\uFF0C\u53EF\u4EE5\u67E5\u770B workspace \u4E4B\u95F4\u7684\u4F9D\u8D56\u6811\uFF0C\u7C7B\u4F3C\u5982\u4E0B\uFF1A</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">youtils-functions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">location</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">packages/youtils-functions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">workspaceDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">mismatchedWorkspaceDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">youtils-node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">location</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">packages/youtils-node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">workspaceDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">youtils-functions</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">mismatchedWorkspaceDependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u793E\u533A\u6D41\u884C\u7684\u65B9\u5F0F\u662F\u4F7F\u7528 yarn workspace \u6765\u7BA1\u7406\u5305\u4F9D\u8D56\uFF0C\u4F7F\u7528 lerna \u6765\u8FDB\u884C npm \u5305\u7684\u53D1\u5E03\u3002</p><h2 id="\u53C2\u8003" tabindex="-1">\u53C2\u8003 <a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a></h2><ul><li><a href="https://zhuanlan.zhihu.com/p/381794854" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/381794854</a></li><li><a href="https://www.jianshu.com/p/990afa30b6fe" target="_blank" rel="noreferrer">https://www.jianshu.com/p/990afa30b6fe</a></li></ul>`,16),e=[l];function c(t,r,D,y,F,i){return n(),a("div",null,e)}const A=s(o,[["render",c]]);export{u as __pageData,A as default};
